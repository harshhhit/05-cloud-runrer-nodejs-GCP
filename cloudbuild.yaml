steps:
  
   # Install Node.js
  - name: 'node:14'
    entrypoint: npm
    args: [
      - npm --version
      - npm install -g sonarqube-scanner
      ]
  


  # Build the Docker image
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/clean-mountain-395906/cloudsonarscner', '.']

  # Push the Docker image to Google Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'gcr.io/clean-mountain-395906/cloudsonarscner']

  # - name: 'ubuntu'
  #   entrypoint: 'bash'
  #   args: ['npm --version']
  #   #args: ['verify', 'sonar:sonar','-Dsonar.host.url=https://sonarcloud.io','-Dsonar.organization=cleanmoutain','-Dsonar.projectKey=cleanmoutain_cleane','-Dsonar.login=${_SONAR_TOKEN}']
  #   id: SAST Scan using SonarCloud in GCP DevSecOps Pipeline

images:
- 'gcr.io/clean-mountain-395906/cloudsonarscner'

